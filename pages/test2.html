<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll-Driven Services Carousel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* BASE STYLES & SETUP */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light background */
            margin: 0;
            padding: 0;
        }

        /* --- CSS VARIABLES --- */
        :root {
            /* Define the core card dimensions */
            --card-size: 200px; 
            --overlap-amount: 40px; 
            
            /* CALCULATIONS: */
            --card-scroll-step: calc(var(--card-size) - var(--overlap-amount)); 
            --total-cards: 6; 
            
            /* New Variable for Oscillation Distance */
            --horizontal-offset: 150px; 
            
            /* Calculate total scroll height dynamically in JS for simplicity, 
               but keep the old calculation structure for reference: */
            --scroll-height: calc(var(--card-scroll-step) * (var(--total-cards) - 1));
        }
        
        /* The container driving the scroll effect */
        .sv-scroll-carousel-container {
            /* FIX 1: Increase height and padding to prevent overlap with previous section (pushes content down 100vh) */
            /* Total height = Scroll Height + (100vh Top Buffer) + (50vh Bottom Buffer) */
            height: calc(var(--scroll-height) + 150vh); 
            display: flex;
            justify-content: center;
            align-items: flex-start; 
            padding-top: 100vh; /* Pushes content down to prevent overlap */
            padding-bottom: 50vh; /* Ensures the last card scrolls out of view */
            margin : 0 ; 
            overflow-x: hidden; /* Prevent horizontal scrollbar during animation */
            position: relative; /* Needed for child absolute positioning if required */
        }
        
        /* Top Scroll Indicator/Title */
        .sv-title-section {
            position: absolute;
            top: 50vh; /* Position it visibly in the center of the pre-scroll area */
            width: 100%;
            text-align: center;
        }
        .sv-title-section h2 {
            font-size: 2rem;
            font-weight: 600;
            color: #3b0ddb;
            animation: bounce 2s infinite;
        }

        /* --- Carousel Track (The Fixed Positioner) --- */
        .sv-carousel-track {
            position: sticky;
            top: 50%;
            /* FIX 2: Center the entire track vertically relative to the viewport */
            transform: translateY(-50%); 
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: calc(var(--overlap-amount) * -1); 
            padding: 0;
            margin: 0;
            width : 50%;
            will-change: transform; 
        }
        @media (max-width: 750px){
            .sv-carousel-track {
                width : 90% ; 
            }
        }

        /* --- Card Styles (The Base) --- */
        .sv-image {
            width : 80% ; 
            height : 65% ; 
            object-fit: cover;
            border-radius: 40%;
            transition: border-radius 0.4s ease;
        }
        .sv-carousel-card {
            width: var(--card-size);
            height: var(--card-size);
            color: #1f2937; /* Dark text */
            background-color: #ffffff;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            padding: 15px;
            box-sizing: border-box;
            cursor: pointer;
            border: 2px solid transparent;
            
            /* 1. INITIAL STATE: Invisible, small, and CENTERED */
            opacity: 0;
            transform: scale(0.5); 
            
            /* Transitions for size, opacity, and box-shadow only. Transform is JS-controlled. */
            transition: opacity 0.4s ease-out, 
                        box-shadow 0.3s ease,
                        width 0.4s, height 0.4s,
                        border-color 0.4s ease;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            overflow: hidden;
            will-change: transform, opacity; 
        }
        
        /* State when the card comes into view (Pop Out) */
        .sv-carousel-card.sv-in-view {
            opacity: 1;
            /* Scale is now controlled in JS to allow for combined transform */
            transform: scale(1); 
        }

        /* State when the card is the active/center card (Biggest Size) */
        .sv-carousel-card.sv-active {
            width: 100%;
            height: auto;
            z-index: 10;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
            background-color: #e6f2ff;
            border-color: #3b0ddb;
        }
        
        .sv-active .sv-image {
            border-radius: 12px;
        }

        /* Card Content Styles */
        .sv-card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            gap: 5px;
        }
        .sv-card-content h3 {
            font-weight: 600;
            color: #3b0ddb;
            transition: font-size 0.4s;
        }
        .sv-card-content p {
            color: #4b5563;
        }

        .sv-card-link {
            background-color :#3b0ddb ; 
            font-size : small; 
            padding : 5px 7px ; 
            color :#fff; 
            border-radius : 8px ;
            text-decoration: none;
            transition: padding 0.4s, font-size 0.4s;
        }
        .sv-active .sv-card-link {
            font-size :medium ; 
            padding : 10px 14px ;
        }
        .sv-in-view .sv-card-content h3 {
            font-size : 1rem ; 
            margin : 0 ; 
        }
        .sv-active .sv-card-content h3 {
            font-size : 1.5rem;
            margin : 0 ; 
        }

        /* Mobile Responsiveness */
        @media (max-width: 600px) {
            :root {
                --card-size: 150px; 
                --overlap-amount: 30px;
                --horizontal-offset: 80px; 
            }
            .sv-scroll-carousel-container {
                height: calc(var(--scroll-height) + 150vh); 
            }
            .sv-card-link {
                padding : 4px 6px ; 
            }
            .sv-active .sv-card-link {
                padding : 8px 12px ;
            }
        }
    </style>
</head>
<body>

<!-- Placeholder content to force initial scroll -->
<div class="h-[100vh] bg-gray-100 flex items-center justify-center text-3xl text-gray-700 shadow-inner">
    Your Previous Section Content (Scroll Down)
</div>

<!-- Services Scroll Carousel Section -->
<section id="services" class="sv-scroll-carousel-container">
    
    <!-- FIX: Move H2 outside of the sticky track for proper vertical centering and to prevent overlap -->
    <div class="sv-title-section">
        <h2>Scroll Down to Explore Services</h2>
    </div>

    <div class="sv-carousel-track">
        <!-- Removed the redundant <section> wrapper for the H2 -->

        <div class="sv-carousel-card" id="card-1">
            <div class="sv-card-content">
                <img src="https://placehold.co/200x130/3b0ddb/ffffff?text=AI+Automation" alt="Automation Designing for Businesses" class="sv-image">
                <h3>Automation Designing For Businesses</h3>
                <p>Automate Posts, Content Creation, Complaint Chatbot</p>
                <a href="./pages/services/automate-businesses.html" class="sv-card-link">Explore Details</a>
            </div>
        </div>
        <div class="sv-carousel-card" id="card-2">
            <div class="sv-card-content">
                <img src="https://placehold.co/200x130/3b0ddb/ffffff?text=Web+App+Build" alt="Build Website / WebApp" class="sv-image">
                <h3>Build Website / WebApp</h3>
                <p>Build a Professional Website for Business / Personal Portfolio </p>
                <a href="./pages/services/web-services.html" class="sv-card-link">Explore Details </a>
            </div>
        </div>
        <div class="sv-carousel-card" id="card-3">
            <div class="sv-card-content">
                <img class="sv-image" src="https://placehold.co/200x130/3b0ddb/ffffff?text=Mobile+App" alt="Build Mobile Application">
                <h3>Build Mobile Application</h3>
                <p>Build a Professional Android Application</p>
                <a href="./pages/services/mobile-application.html" class="sv-card-link">Explore Details</a>
            </div>
        </div>
        <div class="sv-carousel-card" id="card-4">
            <div class="sv-card-content">
                <img class="sv-image" src="https://placehold.co/200x130/3b0ddb/ffffff?text=Video+Editing" alt="Video Editing">
                <h3>Video Editing</h3>
                <p>Get Professional Video Editing Services</p>
                <a href="./pages/services/video-editing-services.html" class="sv-card-link">Explore Details</a>
            </div>
        </div>
        <div class="sv-carousel-card" id="card-5">
            <div class="sv-card-content">
                <img class="sv-image" src="https://placehold.co/200x130/3b0ddb/ffffff?text=Digital+Marketing" alt="Digital Marketing">
                <h3>Digital Marketing (SEO and SMM)</h3>
                <p>Create More Digital Reach via SEO and Social Media </p>
                <a href="./pages/services/digital-marketing-solutions.html" class="sv-card-link">Explore Details</a>
            </div>
        </div>
        <div class="sv-carousel-card" id="card-6">
            <div class="sv-card-content">
                <img class="sv-image" src="https://placehold.co/200x130/3b0ddb/ffffff?text=Business+Analytics" alt="Business Analysis">
                <h3>Business Analytics & Strategy</h3>
                <p>Get Business as per Best Insights through Data Analysis Dashboards</p>
                <a href="./pages/services/business-analytics-and-strategies.html" class="sv-card-link">Explore Details</a>
            </div>
        </div>
    </div>
</section>

<!-- Placeholder content to scroll past the carousel -->
<div class="h-[100vh] bg-gray-100 flex items-center justify-center text-3xl text-gray-700 shadow-inner">
    Content After Carousel
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.querySelector('.sv-scroll-carousel-container');
        const cards = document.querySelectorAll('.sv-carousel-card');
        
        // --- Get CSS variables (required for calculations) ---
        const style = getComputedStyle(document.documentElement);
        // Use a function to safely parse CSS variables
        const getCssVar = (name) => parseFloat(style.getPropertyValue(name));

        const cardScrollStep = getCssVar('--card-scroll-step');
        const horizontalOffset = getCssVar('--horizontal-offset');
        
        // 100vh buffer used at the top of the container (to prevent previous section overlap)
        const topPaddingVh = window.innerHeight; 

        // --- Observer for 'in-view' (Pop Out/In) ---
        // Used only for initial visibility and scale (sv-in-view class)
        const popOutObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('sv-in-view');
                } else {
                    entry.target.classList.remove('sv-in-view');
                    entry.target.classList.remove('sv-active'); 
                }
            });
        }, {
            root: null, 
            threshold: 0.05 
        });

        cards.forEach(card => popOutObserver.observe(card));


        // --- Scroll Scrubbing Function (Continuous Smooth Motion) ---
        function updateScrollScrub() {
            // Get the current scroll position
            const scrollY = window.scrollY;
            
            // Calculate the scroll position relative to the start of the scrubbing area (below the 100vh padding)
            // FIX: This calculation ensures that scrollY=0 at the top of the scrubbing zone
            const effectiveScrollY = scrollY - (container.offsetTop - topPaddingVh); 

            // Loop through each card to apply transformations based on its index
            cards.forEach((card, index) => {
                // The scroll position where this specific card should be centered
                const centerScrollPos = index * cardScrollStep;
                
                // Current progress for this card: effectiveScrollY - idealCenterPosition
                let progress = effectiveScrollY - centerScrollPos;

                // --- Horizontal Oscillation (The Smooth Part) ---
                
                // Normalize progress to a value between -1 (fully left) and 1 (fully right)
                // Centered around 0 (active state).
                let normalizedProgress = progress / cardScrollStep;

                // Clamp the value to ensure transformation doesn't exceed the defined offset
                normalizedProgress = Math.min(1.5, Math.max(-1.5, normalizedProgress)); // Use a slightly higher clamp for softer edges

                // Calculate the final translation (scrubbing from -150px to +150px)
                const translateX = normalizedProgress * horizontalOffset;
                
                // --- Active State (Size Change & Z-Index) ---
                
                // Determine if the card is "close enough" to the center to be active (e.g., within 0.5 of a step)
                const isCloseToCenter = Math.abs(normalizedProgress) < 0.5; 

                if (isCloseToCenter) {
                    card.classList.add('sv-active');
                } else {
                    card.classList.remove('sv-active');
                }
                
                // Apply the combined transform (Scale is kept at 1 because it's handled by .sv-in-view)
                if (card.classList.contains('sv-in-view')) {
                    // Use a small scale adjustment based on closeness to center (optional but adds depth)
                    const scaleAdjustment = 1 - (Math.abs(normalizedProgress) * 0.1); 
                    card.style.transform = `translateX(${translateX}px) scale(${scaleAdjustment})`;
                } else {
                    // If not in view, maintain the initial small/invisible state 
                    card.style.transform = 'scale(0.5)';
                }
            });
        }

        // Initialize the position on load
        window.addEventListener('load', updateScrollScrub);

        // Attach the scroll listener for continuous updates
        window.addEventListener('scroll', updateScrollScrub);
        window.addEventListener('resize', updateScrollScrub); 
    });
</script>

</body>
</html>